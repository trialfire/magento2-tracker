<?php
/**
 * @category    Trialfire
 * @package     Trialfire_Tracker
 * @author      Mark Lieberman <mark@trialfire.com>
 * @copyright   Copyright (c) Trialfire
 *
 * Outputs a tracking script include at the top of every page.
 */
?>
<script type="text/javascript">
var s = document.createElement('script'),
    tf = { 
      $q: [], 
      do: function () { 
        tf.$q.push([].slice.call(arguments)); 
      }
    };
[ 'init', 'ready', 'identify', 'property', 'logout', 'track', 'optout' ].forEach(function (m) {
  tf[m] = function () {
    tf.do.apply(null, [m].concat([].slice.call(arguments)));
  };
});
window.Trialfire = tf;
s.src = "<?= $block->getAssetUrl(); ?>"; 
document.head.appendChild(s);
Trialfire.init('<?= $block->getApiToken(); ?>');
</script>
